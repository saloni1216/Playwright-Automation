<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Login & Job Application</title>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function () {
  emailjs.init("gdDT6lZUGGIT4X1EV");
})();
</script>

<style>
:root {
  --primary: #667eea;
  --secondary: #764ba2;
}

/* Reset */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Card */
.container {
  background: #fff;
  padding: 28px;
  width: 100%;
  max-width: 420px;
  border-radius: 14px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.25);
  animation: fadeSlideIn 0.7s ease;
}

/* Scroll for small screens */
.container::-webkit-scrollbar {
  width: 6px;
}
.container::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 4px;
}

h2 {
  text-align: center;
  margin-bottom: 20px;
  color: #333;
}

/* Inputs */
input {
  width: 100%;
  padding: 11px;
  margin: 7px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  transition: border 0.3s, box-shadow 0.3s;
}

input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(102,126,234,0.2);
}

/* Button */
button {
  width: 100%;
  padding: 13px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  margin-top: 15px;
  cursor: pointer;
  transition: transform 0.2s, background 0.3s;
}

button:hover:not(:disabled) {
  background: #5a67d8;
  transform: translateY(-2px);
}

button:disabled {
  background: #aaa;
  cursor: not-allowed;
}

/* Hide */
.hidden {
  display: none;
}

/* Dropdown */
.dropdown {
  position: relative;
  margin-top: 10px;
}

.dropdown-btn {
  padding: 11px;
  border: 1px solid #ccc;
  border-radius: 8px;
  cursor: pointer;
  background: #fff;
  transition: border 0.3s;
}

.dropdown-btn:hover {
  border-color: var(--primary);
}

.dropdown-content {
  position: absolute;
  width: 100%;
  background: white;
  border-radius: 8px;
  border: 1px solid #ccc;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.35s ease;
  z-index: 10;
}

.dropdown-content.show {
  max-height: 220px;
}

.dropdown-content label {
  display: block;
  padding: 9px 10px;
  cursor: pointer;
  transition: background 0.2s;
}

.dropdown-content label:hover {
  background: #f1f1f1;
}

/* Selected Skills */
.selected-skills {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.skill-tag {
  background: var(--primary);
  color: #fff;
  padding: 7px 12px;
  border-radius: 20px;
  font-size: 13px;
  cursor: grab;
  animation: popIn 0.25s ease;
}

/* Animations */
@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes popIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* Responsive */
@media (max-width: 480px) {
  .container {
    border-radius: 0;
    height: 100vh;
    max-width: 100%;
    box-shadow: none;
    overflow-y: auto;
  }
}
</style>
</head>

<body>

<!-- Login -->
<div class="container" id="loginPage">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- Job Application -->
<div class="container hidden" id="formPage">
  <h2>Job Application</h2>

  <input id="name" placeholder="Full Name">
  <input id="email" type="email" placeholder="Email">
  <input id="mobile" placeholder="Mobile Number">
  <input id="qualification" placeholder="Qualification">
  <input id="location" placeholder="Current Location">
  <input id="jobProfile" placeholder="Job Profile">
  <input id="experience" placeholder="Experience">
  <input id="currentSalary" placeholder="Current Salary">
  <input id="expectedSalary" placeholder="Expected Salary">
  <input id="preferredLocation" placeholder="Preferred Location">

  <label><strong>Top Skills</strong></label>
  <div class="dropdown">
    <div class="dropdown-btn" onclick="toggleDropdown()">Select Skills</div>
    <div class="dropdown-content" id="skillOptions">
      <label><input type="checkbox" value="JavaScript"> JavaScript</label>
      <label><input type="checkbox" value="Playwright"> Playwright</label>
      <label><input type="checkbox" value="Selenium"> Selenium</label>
      <label><input type="checkbox" value="MySQL"> MySQL</label>
      <label><input type="checkbox" value="Postman"> Postman</label>
      <label><input type="checkbox" value="JIRA"> JIRA</label>
      <label><input type="checkbox" value="HTML"> HTML</label>
      <label><input type="checkbox" value="CSS"> CSS</label>
    </div>
  </div>

  <div class="selected-skills" id="selectedSkills"></div>

  <button id="submitBtn" disabled onclick="sendEmail()">Submit Application</button>
</div>

<script>
function login() {
  if (username.value && password.value) {
    loginPage.classList.add("hidden");
    formPage.classList.remove("hidden");
  } else alert("Enter username & password");
}

const dropdown = document.getElementById("skillOptions");
const selectedBox = document.getElementById("selectedSkills");
let dragged;

function toggleDropdown() {
  dropdown.classList.toggle("show");
}

document.querySelectorAll("#skillOptions input").forEach(cb => {
  cb.addEventListener("change", () => {
    cb.checked ? addSkill(cb.value) : removeSkill(cb.value);
    dropdown.classList.remove("show");
    checkForm();
  });
});

function addSkill(skill) {
  if ([...selectedBox.children].some(s => s.innerText === skill)) return;
  const tag = document.createElement("div");
  tag.className = "skill-tag";
  tag.innerText = skill;
  tag.draggable = true;

  tag.addEventListener("dragstart", () => dragged = tag);
  tag.addEventListener("dragover", e => e.preventDefault());
  tag.addEventListener("drop", e => {
    e.preventDefault();
    selectedBox.insertBefore(dragged, tag);
  });

  selectedBox.appendChild(tag);
}

function removeSkill(skill) {
  [...selectedBox.children].forEach(t => {
    if (t.innerText === skill) selectedBox.removeChild(t);
  });
}

document.querySelectorAll("#formPage input").forEach(i =>
  i.addEventListener("input", checkForm)
);

function checkForm() {
  const filled = [...document.querySelectorAll("#formPage input")]
    .every(i => i.value.trim());
  submitBtn.disabled = !(filled && selectedBox.children.length);
}

function sendEmail() {
  const skills = [...selectedBox.children].map(s => s.innerText).join(", ");
  emailjs.send("service_rn0my54", "template_2r7f1eo", {
    name: name.value,
    email: email.value,
    mobile: mobile.value,
    qualification: qualification.value,
    location: location.value,
    jobProfile: jobProfile.value,
    experience: experience.value,
    currentSalary: currentSalary.value,
    expectedSalary: expectedSalary.value,
    preferredLocation: preferredLocation.value,
    skills
  }).then(() => alert("Application submitted successfully!"));
}
</script>

</body>
</html>
